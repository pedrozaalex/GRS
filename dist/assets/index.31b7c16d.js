var I=Object.defineProperty,O=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var R=(r,e,c)=>e in r?I(r,e,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[e]=c,k=(r,e)=>{for(var c in e||(e={}))E.call(e,c)&&R(r,c,e[c]);if(C)for(var c of C(e))M.call(e,c)&&R(r,c,e[c]);return r},S=(r,e)=>O(r,F(e));import{r as p,g as j,j as v,u as A,c as q,s as G,A as P,I as w,R as z,a as T,b as U}from"./vendor.36d3100e.js";const _=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function c(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerpolicy&&(t.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?t.credentials="include":n.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(n){if(n.ep)return;n.ep=!0;const t=c(n);fetch(n.href,t)}};_();function B(r,e,c=600){const a=p.exports.useRef(!1),[n,t]=p.exports.useState(r);return p.exports.useEffect(()=>{let i=a.current?setTimeout(e,c):null;return a.current=!0,()=>{i&&clearTimeout(i)}},[n]),[n,t]}const D=j`
  query listRepos($queryString: String!) {
    search(query: $queryString, type: REPOSITORY, first: 50) {
      repositoryCount
      edges {
        node {
          ... on Repository {
            id
            name
            description
            stargazerCount
            languages(first: 10) {
              nodes {
                id
                name
                color
              }
            }
            url
            homepageUrl
            owner {
              login
              url
            }
            licenseInfo {
              key
              url
            }
          }
        }
      }
    }
  }
`;function N(r,e){const c=r.startsWith("#")?1:0;let a=parseInt(r.substring(c,3),16),n=parseInt(r.substring(c+2,5),16),t=parseInt(r.substring(c+4,7),16);a=Math.round(a/e),n=Math.round(n/e),t=Math.round(t/e),a=a<255?a:255,n=n<255?n:255,t=t<255?t:255;const i=a.toString(16).length===1?`0${a.toString(16)}`:a.toString(16),u=n.toString(16).length===1?`0${n.toString(16)}`:n.toString(16),l=t.toString(16).length===1?`0${t.toString(16)}`:t.toString(16);return`#${i}${u}${l}`}function $(r,e){return`rgba(${parseInt(r.slice(1,3),16)}, ${parseInt(r.slice(3,5),16)}, ${parseInt(r.slice(5,7),16)}, ${e})`}const s=v.exports.jsx,o=v.exports.jsxs,h=v.exports.Fragment,x=({language:r,onClick:e,isSelected:c})=>{const{name:a,color:n}=r;if(!a||!n)return null;const t=()=>{e&&typeof e=="function"&&e(a)};return s("div",{className:`language-label ${c?"selected":""}`,style:k({backgroundColor:$(n,.5),color:$(N(n,.3),.5),transition:"all 0.2s ease-in-out"},c&&{backgroundColor:n,color:N(n,.3),border:`2px solid ${N(n,.3)}`}),onClick:t,children:a})},L=(r,e,c)=>{const a=S(k({},e),{[r]:S(k({},e[r]),{isSelected:!e[r].isSelected})});c(a)};function H({globalLanguageList:r,setGlobalLanguageList:e}){const c=[];for(const[a,n]of Object.entries(r))c.push({langId:a,langName:n.langName,langColor:n.langColor,isSelected:r[a].isSelected,onClick:()=>{L(a,r,e)}});return o("div",{className:"language-filter",children:[s("h3",{children:"Filter by language"}),s("ul",{children:c.map(a=>s(x,{language:{id:a.langId,name:a.langName,color:a.langColor},isSelected:a.isSelected,onClick:a.onClick},a.langName))})]})}const Q=r=>r&&Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype,Z=r=>{const{data:{id:e,name:c,description:a,stargazerCount:n,languages:t,url:i,homepageUrl:u,owner:l,licenseInfo:d},globalLanguagesList:m,setGlobalLanguagesList:g}=r;return Q(m)?s(h,{}):s(h,{children:o("li",{className:"repoCard",children:[s("h3",{children:c}),s("p",{children:a}),i&&s("p",{children:s("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:"Go to repo"})}),u&&s("p",{children:s("a",{href:u,target:"_blank",rel:"noopener noreferrer",children:"Contact"})}),s("p",{children:l==null?void 0:l.login}),s("div",{children:t==null?void 0:t.map(f=>s(x,{language:f,isSelected:m[f.id].isSelected,onClick:()=>L(f.id,m,g)},f.name))}),o("p",{children:[n," \u{1F31F}"]}),(d==null?void 0:d.key)&&s("a",{href:d.url,children:d.key.toLocaleUpperCase()})]},e)})};const J=()=>s(h,{children:o("div",{className:"sk-fading-circle",children:[s("div",{className:"sk-circle1 sk-circle"}),s("div",{className:"sk-circle2 sk-circle"}),s("div",{className:"sk-circle3 sk-circle"}),s("div",{className:"sk-circle4 sk-circle"}),s("div",{className:"sk-circle5 sk-circle"}),s("div",{className:"sk-circle6 sk-circle"}),s("div",{className:"sk-circle7 sk-circle"}),s("div",{className:"sk-circle8 sk-circle"}),s("div",{className:"sk-circle9 sk-circle"}),s("div",{className:"sk-circle10 sk-circle"}),s("div",{className:"sk-circle11 sk-circle"}),s("div",{className:"sk-circle12 sk-circle"})]})});function K(r,e){return r.filter(c=>e.includes(c))}function V(r){const{languages:e}=r;return e?e.map(c=>c.name):[]}function W(r,e){return!e||!e.length?!1:K(V(r),e).length===0}function Y(r){return Object.keys(r).filter(e=>r[e].isSelected).map(e=>r[e].langName)}const X=({loading:r,error:e,data:c,globalLanguagesList:a,setGlobalLanguagesList:n})=>{const t=c.repositories,i=Y(a),u=p.exports.useMemo(()=>t.filter(l=>!W(l,i)),[t,i]);return p.exports.useMemo(()=>r?s(J,{}):e?(console.error(e),s(h,{children:o("span",{children:["Error :",e.message]})})):(t==null?void 0:t.length)?o(h,{children:[o("h2",{children:["Found ",u.length," matching repos"]}),s("ul",{className:"repoCardContainer",children:u.map((l,d)=>s(Z,{data:l,globalLanguagesList:a,setGlobalLanguagesList:n},l.id||d))})]}):s("p",{children:"No data to display"}),[r,e,t,u,a])};const ee=({children:r})=>o(h,{children:[o("header",{className:"App-header",children:[o("span",{children:[s("img",{src:"octopus.svg",alt:"logo",height:"40px"})," ","GitHub Repo Search"]}),r]}),s("div",{className:"header-padding"})]});const re=({value:r,onChange:e})=>o("div",{className:"SearchbarContainer",children:[s("input",{className:"Searchbar",value:r,onChange:e,placeholder:"Search repos"}),s("img",{src:"search.svg",alt:"search",width:"30px"})]});const te=({children:r})=>s("div",{className:"MainContainer",children:r});function se(r){var a,n;if(!r)return{repoCount:0,repositories:[]};const{search:e}=r;return{repoCount:(e==null?void 0:e.repositoryCount)||0,repositories:(n=(a=e==null?void 0:e.edges)==null?void 0:a.map(({node:t})=>{var i,u;return{name:t==null?void 0:t.name,description:t==null?void 0:t.description,url:t==null?void 0:t.url,homepageUrl:t==null?void 0:t.homepageUrl,stargazerCount:t==null?void 0:t.stargazerCount,languages:(u=(i=t==null?void 0:t.languages)==null?void 0:i.nodes)==null?void 0:u.map(l=>({id:l.id,name:l.name,color:l.color}))}}))!=null?n:[]}}function ne(){const[r,e]=p.exports.useState(""),[c,a]=B("",()=>e(c)),[n,t]=p.exports.useState({}),i=A(D,{variables:{queryString:r}}),{data:u,loading:l,error:d}=i,m=se(u);return p.exports.useEffect(()=>{const g={};m.repositories.forEach(f=>{var b;(b=f.languages)==null||b.forEach(y=>{g[y.id]||(g[y.id]={langName:y.name,langColor:y.color,isSelected:!1})})}),t(g)},[i.data]),s(h,{children:o("div",{className:"App",children:[s(ee,{children:s(re,{onChange:g=>a(g.target.value),value:c})}),o(te,{children:[s("h1",{children:"Github Repo Search"}),r?o(h,{children:[s(H,{globalLanguageList:n,setGlobalLanguageList:t}),s(X,{data:m,loading:l,error:d,globalLanguagesList:n,setGlobalLanguagesList:t})]}):"Enter a search query to begin"]})]})})}const ae=q({uri:"https://api.github.com/graphql"}),ce=G((r,{headers:e})=>{const c="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";return{headers:S(k({},e),{authorization:c?`Bearer ${c}`:""})}}),ie=new P({cache:new w,link:ce.concat(ae)});z.render(s(T.StrictMode,{children:s(U,{client:ie,children:s(ne,{})})}),document.getElementById("root"));
